{
  "openapi": "3.1.0",
  "info": {
    "title": "Everruns API",
    "description": "API for managing AI agents, sessions, messages, and events",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "0.2.0"
  },
  "servers": [
    {
      "url": "https://app.everruns.com/api",
      "description": "Production API"
    }
  ],
  "paths": {
    "/v1/agents": {
      "get": {
        "tags": [
          "agents"
        ],
        "summary": "GET /v1/agents - List all active agents",
        "operationId": "list_agents",
        "responses": {
          "200": {
            "description": "List of agents",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_Agent"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "agents"
        ],
        "summary": "POST /v1/agents - Create a new agent",
        "operationId": "create_agent",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAgentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Agent created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Agent"
                }
              }
            }
          },
          "400": {
            "description": "Input exceeds allowed limits",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/agents/import": {
      "post": {
        "tags": [
          "agents"
        ],
        "summary": "POST /v1/agents/import - Import agent from Markdown, YAML, or JSON",
        "description": "Accepts agent definition in multiple formats:\n- Markdown with YAML front matter (if starts with ---)\n- Pure YAML\n- Pure JSON\n- Plain text (treated as system prompt, name auto-generated)",
        "operationId": "import_agent",
        "requestBody": {
          "content": {
            "text/plain": {
              "schema": {
                "type": "string"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Agent imported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Agent"
                }
              }
            }
          },
          "400": {
            "description": "Invalid format or input exceeds limits",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/agents/{agent_id}": {
      "get": {
        "tags": [
          "agents"
        ],
        "summary": "GET /v1/agents/{agent_id} - Get agent by ID",
        "operationId": "get_agent",
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "description": "Agent ID (prefixed, e.g., agt_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Agent"
                }
              }
            }
          },
          "400": {
            "description": "Invalid agent ID"
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": [
          "agents"
        ],
        "summary": "DELETE /v1/agents/{agent_id} - Archive agent",
        "operationId": "delete_agent",
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "description": "Agent ID (prefixed, e.g., agt_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Agent archived successfully"
          },
          "400": {
            "description": "Invalid agent ID"
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "tags": [
          "agents"
        ],
        "summary": "PATCH /v1/agents/{agent_id} - Update agent",
        "operationId": "update_agent",
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "description": "Agent ID (prefixed, e.g., agt_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAgentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Agent updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Agent"
                }
              }
            }
          },
          "400": {
            "description": "Invalid agent ID or input exceeds allowed limits",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/agents/{agent_id}/export": {
      "get": {
        "tags": [
          "agents"
        ],
        "summary": "GET /v1/agents/{agent_id}/export - Export agent in Markdown format with YAML front matter",
        "operationId": "export_agent",
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "description": "Agent ID (prefixed, e.g., agt_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent exported as Markdown",
            "content": {
              "text/markdown": {}
            }
          },
          "400": {
            "description": "Invalid agent ID"
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/capabilities": {
      "get": {
        "tags": [
          "capabilities"
        ],
        "summary": "GET /v1/capabilities - List all available capabilities",
        "operationId": "list_capabilities",
        "responses": {
          "200": {
            "description": "List of available capabilities",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_CapabilityInfo"
                }
              }
            }
          }
        }
      }
    },
    "/v1/capabilities/{capability_id}": {
      "get": {
        "tags": [
          "capabilities"
        ],
        "summary": "GET /v1/capabilities/{capability_id} - Get a specific capability",
        "operationId": "get_capability",
        "parameters": [
          {
            "name": "capability_id",
            "in": "path",
            "description": "Capability ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Capability found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CapabilityInfo"
                }
              }
            }
          },
          "404": {
            "description": "Capability not found"
          }
        }
      }
    },
    "/v1/durable/executions/{execution_id}": {
      "get": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "GET /v1/durable/executions/:execution_id - Get execution details",
        "operationId": "get_execution",
        "parameters": [
          {
            "name": "execution_id",
            "in": "path",
            "description": "Execution ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Execution details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleExecutionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Execution not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules": {
      "get": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "GET /v1/durable/schedules - List schedules",
        "operationId": "list_schedules",
        "parameters": [
          {
            "name": "enabled",
            "in": "query",
            "description": "Filter by enabled status",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "target_type",
            "in": "query",
            "description": "Filter by target type",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Pagination offset",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Pagination limit",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of schedules",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchedulesListResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "POST /v1/durable/schedules - Create a new schedule",
        "operationId": "create_schedule",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateScheduleRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Schedule created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Schedule name already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules/{schedule_id}": {
      "get": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "GET /v1/durable/schedules/:schedule_id - Get schedule details",
        "operationId": "get_schedule",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "DELETE /v1/durable/schedules/:schedule_id - Delete schedule",
        "operationId": "delete_schedule",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Schedule deleted"
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "PATCH /v1/durable/schedules/:schedule_id - Update schedule",
        "operationId": "update_schedule",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateScheduleRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Schedule updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules/{schedule_id}/executions": {
      "get": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "GET /v1/durable/schedules/:schedule_id/executions - List schedule executions",
        "operationId": "list_schedule_executions",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter by status",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Pagination offset",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Pagination limit",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of executions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleExecutionsListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules/{schedule_id}/pause": {
      "post": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "POST /v1/durable/schedules/:schedule_id/pause - Pause schedule",
        "operationId": "pause_schedule",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule paused",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules/{schedule_id}/resume": {
      "post": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "POST /v1/durable/schedules/:schedule_id/resume - Resume schedule",
        "operationId": "resume_schedule",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule resumed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules/{schedule_id}/stats": {
      "get": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "GET /v1/durable/schedules/:schedule_id/stats - Get schedule statistics",
        "operationId": "get_schedule_stats",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleStatsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/durable/schedules/{schedule_id}/trigger": {
      "post": {
        "tags": [
          "durable-schedules"
        ],
        "summary": "POST /v1/durable/schedules/:schedule_id/trigger - Manually trigger schedule",
        "operationId": "trigger_schedule",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "description": "Schedule ID",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule triggered",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TriggerResponse"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/llm-models": {
      "get": {
        "tags": [
          "llm-models"
        ],
        "summary": "List all models across all providers",
        "operationId": "list_all_models",
        "parameters": [
          {
            "name": "source",
            "in": "query",
            "description": "Filter by model source (manual, discovered, predefined)",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "$ref": "#/components/schemas/LlmModelSource"
                }
              ]
            }
          },
          {
            "name": "include_stale",
            "in": "query",
            "description": "Include models that are stale (not seen in recent sync). Default: true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "favorites_only",
            "in": "query",
            "description": "Only return favorite models. Default: false",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of all models",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_LlmModelWithProvider"
                }
              }
            }
          }
        }
      }
    },
    "/v1/llm-models/{id}": {
      "get": {
        "tags": [
          "llm-models"
        ],
        "summary": "Get a specific model with provider info and profile",
        "operationId": "get_model",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Model ID (prefixed, e.g., mod_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Model found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmModelWithProvider"
                }
              }
            }
          },
          "400": {
            "description": "Invalid model ID"
          },
          "404": {
            "description": "Model not found"
          }
        }
      },
      "delete": {
        "tags": [
          "llm-models"
        ],
        "summary": "Delete a model",
        "operationId": "delete_model",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Model ID (prefixed, e.g., mod_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Model deleted"
          },
          "400": {
            "description": "Invalid model ID"
          },
          "404": {
            "description": "Model not found"
          }
        }
      },
      "patch": {
        "tags": [
          "llm-models"
        ],
        "summary": "Update a model",
        "operationId": "update_model",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Model ID (prefixed, e.g., mod_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLlmModelRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Model updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmModel"
                }
              }
            }
          },
          "400": {
            "description": "Invalid model ID"
          },
          "404": {
            "description": "Model not found"
          }
        }
      }
    },
    "/v1/llm-providers": {
      "get": {
        "tags": [
          "llm-providers"
        ],
        "summary": "List all LLM providers",
        "operationId": "list_providers",
        "responses": {
          "200": {
            "description": "List of providers",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_LlmProvider"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "llm-providers"
        ],
        "summary": "Create a new LLM provider",
        "operationId": "create_provider",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLlmProviderRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Provider created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmProvider"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "500": {
            "description": "Internal error"
          }
        }
      }
    },
    "/v1/llm-providers/{id}": {
      "get": {
        "tags": [
          "llm-providers"
        ],
        "summary": "Get a specific LLM provider",
        "operationId": "get_provider",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Provider ID (prefixed, e.g., prov_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Provider found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmProvider"
                }
              }
            }
          },
          "400": {
            "description": "Invalid provider ID"
          },
          "404": {
            "description": "Provider not found"
          }
        }
      },
      "delete": {
        "tags": [
          "llm-providers"
        ],
        "summary": "Delete an LLM provider",
        "operationId": "delete_provider",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Provider ID (prefixed, e.g., prov_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Provider deleted"
          },
          "400": {
            "description": "Invalid provider ID"
          },
          "404": {
            "description": "Provider not found"
          }
        }
      },
      "patch": {
        "tags": [
          "llm-providers"
        ],
        "summary": "Update an LLM provider",
        "operationId": "update_provider",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Provider ID (prefixed, e.g., prov_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLlmProviderRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Provider updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmProvider"
                }
              }
            }
          },
          "400": {
            "description": "Invalid provider ID"
          },
          "404": {
            "description": "Provider not found"
          }
        }
      }
    },
    "/v1/llm-providers/{provider_id}/models": {
      "get": {
        "tags": [
          "llm-models"
        ],
        "summary": "List models for a specific provider",
        "operationId": "list_provider_models",
        "parameters": [
          {
            "name": "provider_id",
            "in": "path",
            "description": "Provider ID (prefixed, e.g., prov_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of models",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_LlmModel"
                }
              }
            }
          },
          "400": {
            "description": "Invalid provider ID"
          }
        }
      },
      "post": {
        "tags": [
          "llm-models"
        ],
        "summary": "Create a new model for a provider",
        "operationId": "create_model",
        "parameters": [
          {
            "name": "provider_id",
            "in": "path",
            "description": "Provider ID (prefixed, e.g., prov_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLlmModelRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Model created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LlmModel"
                }
              }
            }
          },
          "400": {
            "description": "Invalid provider ID"
          },
          "500": {
            "description": "Internal error"
          }
        }
      }
    },
    "/v1/mcp-servers": {
      "get": {
        "tags": [
          "mcp-servers"
        ],
        "summary": "GET /v1/mcp-servers - List all MCP servers",
        "operationId": "list_mcp_servers",
        "responses": {
          "200": {
            "description": "List of MCP servers",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_McpServer"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "mcp-servers"
        ],
        "summary": "POST /v1/mcp-servers - Create a new MCP server",
        "operationId": "create_mcp_server",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMcpServerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "MCP server created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServer"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or duplicate name",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/mcp-servers/{server_id}": {
      "get": {
        "tags": [
          "mcp-servers"
        ],
        "summary": "GET /v1/mcp-servers/{server_id} - Get MCP server by ID",
        "operationId": "get_mcp_server",
        "parameters": [
          {
            "name": "server_id",
            "in": "path",
            "description": "MCP server ID (prefixed, e.g., mcp_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "MCP server found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServer"
                }
              }
            }
          },
          "400": {
            "description": "Invalid server ID"
          },
          "404": {
            "description": "MCP server not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": [
          "mcp-servers"
        ],
        "summary": "DELETE /v1/mcp-servers/{server_id} - Delete MCP server",
        "operationId": "delete_mcp_server",
        "parameters": [
          {
            "name": "server_id",
            "in": "path",
            "description": "MCP server ID (prefixed, e.g., mcp_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "MCP server deleted successfully"
          },
          "400": {
            "description": "Invalid server ID"
          },
          "404": {
            "description": "MCP server not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "tags": [
          "mcp-servers"
        ],
        "summary": "PATCH /v1/mcp-servers/{server_id} - Update MCP server",
        "operationId": "update_mcp_server",
        "parameters": [
          {
            "name": "server_id",
            "in": "path",
            "description": "MCP server ID (prefixed, e.g., mcp_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMcpServerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "MCP server updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServer"
                }
              }
            }
          },
          "400": {
            "description": "Invalid server ID or input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "MCP server not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/sessions": {
      "get": {
        "tags": [
          "sessions"
        ],
        "summary": "GET /v1/sessions - List sessions in organization",
        "operationId": "list_sessions",
        "parameters": [
          {
            "name": "agent_id",
            "in": "query",
            "description": "Filter sessions by agent ID.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "agent_01933b5a00007000800000000000001"
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of items to skip (for pagination).",
            "required": false,
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "format": "int32",
              "default": 0,
              "minimum": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of items to return (for pagination).",
            "required": false,
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "format": "int32",
              "default": 20,
              "maximum": 100,
              "minimum": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of sessions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_Session"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "sessions"
        ],
        "summary": "POST /v1/sessions - Create a new session",
        "operationId": "create_session",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          },
          "400": {
            "description": "Invalid agent ID"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}": {
      "get": {
        "tags": [
          "sessions"
        ],
        "summary": "GET /v1/sessions/{session_id} - Get session",
        "operationId": "get_session",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., session_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": [
          "sessions"
        ],
        "summary": "DELETE /v1/sessions/{session_id} - Delete session",
        "operationId": "delete_session",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., session_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Session deleted successfully"
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "tags": [
          "sessions"
        ],
        "summary": "PATCH /v1/sessions/{session_id} - Update session",
        "operationId": "update_session",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., session_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSessionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Session updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/cancel": {
      "post": {
        "tags": [
          "sessions"
        ],
        "summary": "POST /v1/sessions/{session_id}/cancel - Cancel current turn",
        "description": "Cancels the currently running turn in the session. If no turn is running,\nthis is a no-op and returns success (idempotent). When a turn is active:\n1. Cancel the underlying workflow execution\n2. Emit a turn.cancelled event\n3. Insert an agent message indicating the turn was cancelled\n4. Set the session status back to idle",
        "operationId": "cancel_turn",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., session_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Turn cancelled successfully (or no-op if idle)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CancelTurnResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/events": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "GET /v1/sessions/{session_id}/events - List events (JSON)",
        "operationId": "list_events",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "since_id",
            "in": "query",
            "description": "Filter events with ID greater than this event ID (prefixed format: event_{32-hex})",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "$ref": "#/components/schemas/TypedId"
                }
              ]
            }
          },
          {
            "name": "exclude",
            "in": "query",
            "description": "Event types to exclude from the response (can be specified multiple times).\nCommon delta events to exclude: output.message.delta, reason.thinking.delta",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "style": "form",
            "explode": true
          }
        ],
        "responses": {
          "200": {
            "description": "Events list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_Event"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/fs": {
      "get": {
        "tags": [
          "filesystem"
        ],
        "summary": "GET /fs - Get root directory listing",
        "operationId": "get_root",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "description": "List recursively",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Directory listing"
          },
          "400": {
            "description": "Invalid session ID"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/fs/_/copy": {
      "post": {
        "tags": [
          "filesystem"
        ],
        "summary": "POST /fs/_/copy - Copy file",
        "operationId": "copy_file",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CopyFileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Copied successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionFile"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID or cannot copy directories"
          },
          "404": {
            "description": "Source not found"
          },
          "409": {
            "description": "Destination exists"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/fs/_/grep": {
      "post": {
        "tags": [
          "filesystem"
        ],
        "summary": "POST /fs/_/grep - Search files",
        "operationId": "grep_files",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GrepRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_GrepResult"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID or regex pattern"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/fs/_/move": {
      "post": {
        "tags": [
          "filesystem"
        ],
        "summary": "POST /fs/_/move - Move/rename file",
        "operationId": "move_file",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoveFileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Moved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionFile"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID or path"
          },
          "404": {
            "description": "Source not found"
          },
          "409": {
            "description": "Destination exists"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/fs/_/stat": {
      "post": {
        "tags": [
          "filesystem"
        ],
        "summary": "POST /fs/_/stat - Get file or directory stat",
        "operationId": "stat_file",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Stat info",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileStat"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/fs/{path}": {
      "get": {
        "tags": [
          "filesystem"
        ],
        "summary": "GET /fs/*path - Get file content or directory listing",
        "operationId": "get_path",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "path",
            "in": "path",
            "description": "File or directory path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "description": "List recursively",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "File content or directory listing"
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "put": {
        "tags": [
          "filesystem"
        ],
        "summary": "PUT /fs/*path - Update file content",
        "operationId": "update_path",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "path",
            "in": "path",
            "description": "File path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateFileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionFile"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID or cannot modify readonly file or directory"
          },
          "404": {
            "description": "Not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "filesystem"
        ],
        "summary": "POST /fs/*path - Create file or directory",
        "operationId": "create_path",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "path",
            "in": "path",
            "description": "File or directory path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionFile"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID or request"
          },
          "409": {
            "description": "Already exists"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": [
          "filesystem"
        ],
        "summary": "DELETE /fs/*path - Delete file or directory",
        "operationId": "delete_path",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "path",
            "in": "path",
            "description": "File or directory path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "description": "Delete recursively",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID or directory not empty"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/messages": {
      "get": {
        "tags": [
          "messages"
        ],
        "summary": "GET /v1/sessions/{session_id}/messages - List messages (PRIMARY data)",
        "operationId": "list_messages",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of messages",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_Message"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "messages"
        ],
        "summary": "POST /v1/sessions/{session_id}/messages - Create message (user message triggers workflow)",
        "operationId": "create_message",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Message created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/sessions/{session_id}/sse": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "GET /v1/sessions/{session_id}/sse - Stream events (SSE notifications)",
        "description": "Establishes a Server-Sent Events (SSE) connection for real-time event streaming.\n\n## Connection Lifecycle Events\n\n- **connected**: Sent immediately when the stream is established.\n  Data: `{\"status\":\"connected\"}`\n\n- **disconnecting**: Sent before the server closes the connection for graceful cycling.\n  Data: `{\"reason\":\"connection_cycle\",\"retry_ms\":100}`\n  Clients should reconnect immediately using the `since_id` of the last received event.\n\n## Connection Cycling\n\nConnections are automatically cycled every 5 minutes to prevent stale connections\nthrough proxies and load balancers. Before closing, the server sends a `disconnecting`\nevent so clients can reconnect seamlessly without missing events.\n\n## Retry Hints\n\nEach SSE event includes a `retry:` field (in milliseconds) that hints how long\nclients should wait before reconnecting if the connection is lost:\n- During active streaming: 100ms (fast reconnect)\n- During idle periods: increases with backoff up to 500ms\n- After `disconnecting` event: 100ms (immediate reconnect)\n\n## Resuming Streams\n\nUse the `since_id` query parameter to resume from a specific event. The server\nwill only send events with IDs greater than the specified value. Event IDs are\nUUID v7 (monotonically increasing), ensuring reliable ordering.",
        "operationId": "stream_sse",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "description": "Session ID (prefixed, e.g., sess_...)",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "since_id",
            "in": "query",
            "description": "Filter events with ID greater than this event ID (prefixed format: event_{32-hex})",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "$ref": "#/components/schemas/TypedId"
                }
              ]
            }
          },
          {
            "name": "exclude",
            "in": "query",
            "description": "Event types to exclude from the response (can be specified multiple times).\nCommon delta events to exclude: output.message.delta, reason.thinking.delta",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "style": "form",
            "explode": true
          }
        ],
        "responses": {
          "200": {
            "description": "Event stream. Includes 'connected' on open, domain events during streaming, and 'disconnecting' before graceful close.",
            "content": {
              "text/event-stream": {}
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "404": {
            "description": "Session not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/v1/users": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "GET /v1/users - List all users",
        "description": "Lists all users in the system with optional search filtering.\nRequires authentication (admin access recommended).",
        "operationId": "list_users",
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "description": "Search by name or email",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListResponse_User"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ActCompletedData": {
        "type": "object",
        "description": "Data for act.completed event",
        "required": [
          "completed",
          "success_count",
          "error_count"
        ],
        "properties": {
          "completed": {
            "type": "boolean",
            "description": "Whether all tool calls completed"
          },
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Duration of the act phase in milliseconds",
            "minimum": 0
          },
          "error_count": {
            "type": "integer",
            "format": "int32",
            "description": "Number of failed tool calls",
            "minimum": 0
          },
          "success_count": {
            "type": "integer",
            "format": "int32",
            "description": "Number of successful tool calls",
            "minimum": 0
          }
        }
      },
      "ActStartedData": {
        "type": "object",
        "description": "Data for act.started event",
        "required": [
          "tool_calls"
        ],
        "properties": {
          "tool_calls": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolCallSummary"
            },
            "description": "Tool calls to be executed"
          }
        }
      },
      "Agent": {
        "type": "object",
        "description": "Agent configuration for agentic loop.\nAn agent defines the behavior and capabilities of an AI assistant.",
        "required": [
          "id",
          "name",
          "system_prompt",
          "status",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentCapabilityConfig"
            },
            "description": "Capabilities enabled for this agent with per-agent configuration.\nCapabilities add tools and system prompt modifications."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the agent was created."
          },
          "default_model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Default LLM model ID for this agent.\nCan be overridden at the session level.",
            "example": "model_01933b5a00007000800000000000001"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Human-readable description of what the agent does."
          },
          "id": {
            "type": "string",
            "description": "External identifier (agent_<32-hex>). Shown as \"id\" in API.\nClient-supplied or auto-generated.",
            "example": "agent_01933b5a000070008000000000000001"
          },
          "name": {
            "type": "string",
            "description": "Display name of the agent."
          },
          "status": {
            "$ref": "#/components/schemas/AgentStatus",
            "description": "Current lifecycle status of the agent."
          },
          "system_prompt": {
            "type": "string",
            "description": "System prompt that defines the agent's behavior.\nSent as the first message in every conversation."
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for organizing and filtering agents."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the agent was last updated."
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Cumulative token usage across all sessions for this agent."
              }
            ]
          }
        }
      },
      "AgentCapabilityConfig": {
        "type": "object",
        "description": "Per-agent capability configuration\n\nAssociates a capability with an agent, including optional per-agent configuration.\nThe config field allows the same capability to behave differently per-agent.",
        "required": [
          "ref"
        ],
        "properties": {
          "config": {
            "description": "Per-agent configuration for this capability (capability-specific)"
          },
          "ref": {
            "type": "string",
            "description": "Reference to the capability ID"
          }
        }
      },
      "AgentStatus": {
        "type": "string",
        "description": "Agent lifecycle status.\n- `active`: Agent is available for use\n- `archived`: Agent is soft-deleted and hidden from listings",
        "enum": [
          "active",
          "archived"
        ]
      },
      "CancelStatus": {
        "type": "string",
        "description": "Status of the cancel operation",
        "enum": [
          "cancelled",
          "no_op"
        ]
      },
      "CancelTurnResponse": {
        "type": "object",
        "description": "Response from cancel turn endpoint",
        "required": [
          "status",
          "message"
        ],
        "properties": {
          "message": {
            "type": "string",
            "description": "Human-readable message",
            "example": "Turn cancelled successfully"
          },
          "status": {
            "$ref": "#/components/schemas/CancelStatus",
            "description": "Whether the cancellation was performed or was a no-op"
          }
        }
      },
      "CapabilityInfo": {
        "type": "object",
        "description": "Public capability information (without internal details)\nThis is what gets returned from the API\nNamed CapabilityInfo to distinguish from the Capability trait",
        "required": [
          "id",
          "name",
          "description",
          "status"
        ],
        "properties": {
          "category": {
            "type": [
              "string",
              "null"
            ],
            "description": "Category for grouping in UI"
          },
          "dependencies": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs of capabilities that this capability depends on.\nWhen this capability is selected, its dependencies are automatically included."
          },
          "description": {
            "type": "string",
            "description": "Description of what this capability provides"
          },
          "icon": {
            "type": [
              "string",
              "null"
            ],
            "description": "Icon name (for UI rendering)"
          },
          "id": {
            "type": "string",
            "description": "Unique capability identifier"
          },
          "is_mcp": {
            "type": "boolean",
            "description": "Whether this is an MCP server capability (for UI badge)"
          },
          "name": {
            "type": "string",
            "description": "Display name"
          },
          "status": {
            "type": "string",
            "description": "Current status"
          },
          "system_prompt": {
            "type": [
              "string",
              "null"
            ],
            "description": "System prompt addition contributed by this capability"
          },
          "tool_definitions": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Tool definitions provided by this capability"
          }
        }
      },
      "ContentPart": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/TextContentPart",
                "description": "Text content"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "text"
                    ]
                  }
                }
              }
            ],
            "description": "Text content"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageContentPart",
                "description": "Image content (base64 or URL)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "image"
                    ]
                  }
                }
              }
            ],
            "description": "Image content (base64 or URL)"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageFileContentPart",
                "description": "Image file content (reference to uploaded image by ID)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "image_file"
                    ]
                  }
                }
              }
            ],
            "description": "Image file content (reference to uploaded image by ID)"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ToolCallContentPart",
                "description": "Tool call content (assistant requesting tool execution)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "tool_call"
                    ]
                  }
                }
              }
            ],
            "description": "Tool call content (assistant requesting tool execution)"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ToolResultContentPart",
                "description": "Tool result content (result of tool execution)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "tool_result"
                    ]
                  }
                }
              }
            ],
            "description": "Tool result content (result of tool execution)"
          }
        ],
        "description": "A part of message content - can be text, image, image_file, tool_call, or tool_result\n\nThis is the canonical content part type used across the system.\nAPI layer enables the \"openapi\" feature to add ToSchema derive."
      },
      "Controls": {
        "type": "object",
        "description": "Runtime controls for message processing",
        "properties": {
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Model ID to use for this message (format: model_{32-hex}).\nOverrides session and agent model settings.",
            "example": "model_01933b5a00007000800000000000001"
          },
          "reasoning": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ReasoningConfig",
                "description": "Reasoning configuration"
              }
            ]
          }
        }
      },
      "CopyFileRequest": {
        "type": "object",
        "description": "Request to copy a file",
        "required": [
          "src_path",
          "dst_path"
        ],
        "properties": {
          "dst_path": {
            "type": "string",
            "description": "Destination path"
          },
          "src_path": {
            "type": "string",
            "description": "Source path"
          }
        }
      },
      "CreateAgentRequest": {
        "type": "object",
        "description": "Request to create a new agent",
        "required": [
          "name",
          "system_prompt"
        ],
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentCapabilityConfig"
            },
            "description": "Capabilities to enable for this agent with per-agent configuration.\nEach capability has a `ref` (capability ID) and optional `config`.",
            "example": [
              {
                "config": {},
                "ref": "current_time"
              },
              {
                "config": {},
                "ref": "web_fetch"
              }
            ]
          },
          "default_model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "The ID of the default LLM model to use for this agent.\nIf not specified, the system default model will be used.",
            "example": "model_01933b5a00007000800000000000001"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "A human-readable description of what the agent does.",
            "example": "Handles customer inquiries and support tickets"
          },
          "id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Client-supplied agent ID (format: agent_{32-hex}).\nIf not provided, one is auto-generated.",
            "example": "agent_01933b5a00007000800000000000001"
          },
          "name": {
            "type": "string",
            "description": "The name of the agent. Used for display purposes.",
            "example": "Customer Support Agent"
          },
          "system_prompt": {
            "type": "string",
            "description": "The system prompt that defines the agent's behavior and capabilities.\nThis is sent as the first message in every conversation.",
            "example": "You are a helpful customer support agent. Be polite and professional."
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for organizing and filtering agents.",
            "example": [
              "support",
              "customer-facing"
            ]
          }
        }
      },
      "CreateFileRequest": {
        "type": "object",
        "description": "Request to create a file",
        "properties": {
          "content": {
            "type": [
              "string",
              "null"
            ],
            "description": "File content (text or base64-encoded)"
          },
          "encoding": {
            "type": [
              "string",
              "null"
            ],
            "description": "Content encoding: \"text\" or \"base64\""
          },
          "is_directory": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Whether to create a directory instead of a file"
          },
          "is_readonly": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Whether file is read-only"
          }
        }
      },
      "CreateLlmModelRequest": {
        "type": "object",
        "description": "Request to create a new LLM model for a provider",
        "required": [
          "model_id",
          "display_name"
        ],
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of capabilities this model supports (e.g., \"chat\", \"vision\", \"tools\").",
            "example": [
              "chat",
              "vision",
              "tools"
            ]
          },
          "display_name": {
            "type": "string",
            "description": "Human-readable display name for the model.",
            "example": "GPT-4o"
          },
          "is_default": {
            "type": "boolean",
            "description": "Whether this model should be the default for the provider.\nOnly one model per provider can be the default.",
            "example": false
          },
          "is_favorite": {
            "type": "boolean",
            "description": "Whether this model should be marked as a favorite for quick access.",
            "example": false
          },
          "model_id": {
            "type": "string",
            "description": "The model identifier used by the provider's API (e.g., \"gpt-4\", \"claude-3-opus\").",
            "example": "gpt-4o"
          }
        }
      },
      "CreateLlmProviderRequest": {
        "type": "object",
        "description": "Request to create a new LLM provider",
        "required": [
          "name",
          "provider_type"
        ],
        "properties": {
          "api_key": {
            "type": [
              "string",
              "null"
            ],
            "description": "API key for authenticating with the provider.\nWill be encrypted at rest if encryption is configured."
          },
          "base_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Base URL for the provider's API. Required for custom endpoints.\nFor standard providers, this can be omitted to use the default URL.",
            "example": "https://api.openai.com/v1"
          },
          "name": {
            "type": "string",
            "description": "Display name for the provider.",
            "example": "OpenAI Production"
          },
          "provider_type": {
            "$ref": "#/components/schemas/LlmProviderType",
            "description": "The type of LLM provider (e.g., openai, anthropic)."
          }
        }
      },
      "CreateMcpServerRequest": {
        "type": "object",
        "description": "Request to create a new MCP server",
        "required": [
          "name",
          "url"
        ],
        "properties": {
          "api_key": {
            "type": [
              "string",
              "null"
            ],
            "description": "API key for authentication (optional)."
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "A human-readable description of what the MCP server provides.",
            "example": "Atlassian MCP Server for Jira and Confluence"
          },
          "headers": {
            "type": [
              "object",
              "null"
            ],
            "description": "Additional HTTP headers for authentication.",
            "additionalProperties": {
              "type": "string"
            },
            "propertyNames": {
              "type": "string"
            }
          },
          "name": {
            "type": "string",
            "description": "The name of the MCP server. Must be unique.",
            "example": "atlassian-mcp-server"
          },
          "transport_type": {
            "$ref": "#/components/schemas/McpServerTransportType",
            "description": "Transport type. Currently only \"http\" is supported."
          },
          "url": {
            "type": "string",
            "description": "The URL of the MCP server endpoint.",
            "example": "https://mcp.atlassian.com/v1/mcp"
          }
        }
      },
      "CreateMessageRequest": {
        "type": "object",
        "description": "Request to create a message",
        "required": [
          "message"
        ],
        "properties": {
          "controls": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Controls",
                "description": "Runtime controls (model, reasoning, etc.)"
              }
            ]
          },
          "message": {
            "$ref": "#/components/schemas/InputMessage",
            "description": "The message to create"
          },
          "metadata": {
            "type": [
              "object",
              "null"
            ],
            "description": "Request-level metadata",
            "additionalProperties": {},
            "propertyNames": {
              "type": "string"
            }
          },
          "tags": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Tags for the message"
          }
        }
      },
      "CreateScheduleRequest": {
        "type": "object",
        "description": "Create schedule request",
        "required": [
          "name",
          "cron_expression",
          "target"
        ],
        "properties": {
          "catch_up_missed": {
            "type": "boolean",
            "description": "Whether to catch up missed triggers (default: false)"
          },
          "cron_expression": {
            "type": "string",
            "description": "Cron expression (5-field or 7-field)"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional description"
          },
          "enabled": {
            "type": "boolean",
            "description": "Whether schedule is enabled (default: true)"
          },
          "max_catch_up": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Max catch-up executions",
            "minimum": 0
          },
          "max_concurrent": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Max concurrent executions",
            "minimum": 0
          },
          "name": {
            "type": "string",
            "description": "Unique name for the schedule"
          },
          "retry_policy": {
            "description": "Retry policy for failed executions"
          },
          "target": {
            "$ref": "#/components/schemas/ScheduleTarget",
            "description": "Target to trigger"
          },
          "timezone": {
            "type": "string",
            "description": "Timezone (default: UTC)"
          }
        }
      },
      "CreateSessionRequest": {
        "type": "object",
        "description": "Request to create a session",
        "required": [
          "agent_id"
        ],
        "properties": {
          "agent_id": {
            "type": "string",
            "description": "ID of the agent to work in this session (format: agent_{32-hex}).",
            "example": "agent_01933b5a00007000800000000000001"
          },
          "capabilities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentCapabilityConfig"
            },
            "description": "Session-level capabilities (additive to agent capabilities).\nApplied after agent capabilities when building RuntimeAgent."
          },
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "The ID of the LLM model to use for this session.\nOverrides the agent's default model if specified.",
            "example": "model_01933b5a00007000800000000000001"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for organizing and filtering sessions.",
            "example": [
              "debugging",
              "urgent"
            ]
          },
          "title": {
            "type": [
              "string",
              "null"
            ],
            "description": "Human-readable title for the session.",
            "example": "Debug login issue"
          }
        }
      },
      "DeleteQuery": {
        "type": "object",
        "description": "Query parameters for DELETE requests",
        "properties": {
          "recursive": {
            "type": "boolean",
            "description": "Whether to delete recursively"
          }
        }
      },
      "DeleteResponse": {
        "type": "object",
        "description": "Response for delete operation",
        "required": [
          "deleted"
        ],
        "properties": {
          "deleted": {
            "type": "boolean"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "description": "Standard error response for API endpoints.",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message describing what went wrong."
          }
        }
      },
      "Event": {
        "type": "object",
        "description": "Standard event following the Everruns event protocol.\n\nAll events have a consistent structure:\n- `id`: Unique event identifier (format: event_{32-hex})\n- `type`: Event type in dot notation (e.g., \"input.message\", \"reason.started\")\n- `ts`: ISO 8601 timestamp with millisecond precision\n- `session_id`: Session this event belongs to (format: session_{32-hex})\n- `context`: Correlation context for tracing\n- `data`: Event-specific payload (typed via EventData enum)\n- `metadata`: Optional arbitrary metadata\n- `tags`: Optional list of tags for filtering",
        "required": [
          "id",
          "type",
          "ts",
          "session_id",
          "context",
          "data"
        ],
        "properties": {
          "context": {
            "$ref": "#/components/schemas/EventContext",
            "description": "Correlation context"
          },
          "data": {
            "$ref": "#/components/schemas/EventData",
            "description": "Event-specific payload. The schema depends on the event type.\nSee EventData documentation for the mapping of type to data schema."
          },
          "id": {
            "type": "string",
            "description": "Unique event identifier (format: event_{32-hex})",
            "example": "event_01933b5a00007000800000000000001"
          },
          "metadata": {
            "description": "Arbitrary metadata for the event"
          },
          "sequence": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Sequence number within session (for ordering)"
          },
          "session_id": {
            "type": "string",
            "description": "Session this event belongs to (format: session_{32-hex})",
            "example": "session_01933b5a00007000800000000000001"
          },
          "tags": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Tags for filtering and categorization"
          },
          "ts": {
            "type": "string",
            "format": "date-time",
            "description": "Event timestamp"
          },
          "type": {
            "type": "string",
            "description": "Event type in dot notation"
          }
        }
      },
      "EventContext": {
        "type": "object",
        "description": "Context for event correlation and tracing\n\nUses OpenTelemetry-style trace/span IDs for observability correlation:\n- `trace_id`: Root of the trace (typically the turn_id string)\n- `span_id`: This event's unique span identifier\n- `parent_span_id`: The parent span's identifier for hierarchical linking",
        "properties": {
          "exec_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Atom execution identifier",
            "example": "exec_01933b5a00007000800000000000001"
          },
          "input_message_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "User message that triggered this turn",
            "example": "message_01933b5a00007000800000000000001"
          },
          "parent_span_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Parent span ID for hierarchical linking (OTel-style).\nLinks this span to its parent in the trace hierarchy."
          },
          "span_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "This event's span ID for observability (OTel-style).\nUniquely identifies this span within the trace."
          },
          "trace_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Trace ID for observability (OTel-style). Groups related spans into a single trace.\nFor agent turns, this is typically the turn_id string."
          },
          "turn_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Turn identifier (for turn-scoped events)",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "EventData": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/InputMessageData"
          },
          {
            "$ref": "#/components/schemas/OutputMessageDeltaData"
          },
          {
            "$ref": "#/components/schemas/OutputMessageStartedData"
          },
          {
            "$ref": "#/components/schemas/OutputMessageCompletedData"
          },
          {
            "$ref": "#/components/schemas/TurnStartedData"
          },
          {
            "$ref": "#/components/schemas/TurnCompletedData"
          },
          {
            "$ref": "#/components/schemas/TurnFailedData"
          },
          {
            "$ref": "#/components/schemas/ReasonStartedData"
          },
          {
            "$ref": "#/components/schemas/ReasonCompletedData"
          },
          {
            "$ref": "#/components/schemas/ActStartedData"
          },
          {
            "$ref": "#/components/schemas/ActCompletedData"
          },
          {
            "$ref": "#/components/schemas/ToolStartedData"
          },
          {
            "$ref": "#/components/schemas/ToolCompletedData"
          },
          {
            "$ref": "#/components/schemas/LlmGenerationData"
          },
          {
            "$ref": "#/components/schemas/ReasonThinkingDeltaData"
          },
          {
            "$ref": "#/components/schemas/ReasonThinkingStartedData"
          },
          {
            "$ref": "#/components/schemas/ReasonThinkingCompletedData"
          },
          {
            "$ref": "#/components/schemas/TurnCancelledData"
          },
          {
            "$ref": "#/components/schemas/SessionStartedData"
          },
          {
            "$ref": "#/components/schemas/SessionActivatedData"
          },
          {
            "$ref": "#/components/schemas/SessionIdledData"
          }
        ],
        "title": "EventData",
        "description": "Event-specific payload. The schema depends on the event type field.",
        "example": {
          "message": {
            "content": [],
            "id": "...",
            "role": "user"
          }
        }
      },
      "FileInfo": {
        "type": "object",
        "description": "File metadata without content",
        "required": [
          "id",
          "session_id",
          "path",
          "name",
          "is_directory",
          "is_readonly",
          "size_bytes",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "is_directory": {
            "type": "boolean"
          },
          "is_readonly": {
            "type": "boolean"
          },
          "name": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "session_id": {
            "type": "string",
            "format": "uuid"
          },
          "size_bytes": {
            "type": "integer",
            "format": "int64"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "FileStat": {
        "type": "object",
        "description": "File stat information",
        "required": [
          "path",
          "name",
          "is_directory",
          "is_readonly",
          "size_bytes",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "is_directory": {
            "type": "boolean"
          },
          "is_readonly": {
            "type": "boolean"
          },
          "name": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "size_bytes": {
            "type": "integer",
            "format": "int64"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "GetQuery": {
        "type": "object",
        "description": "Query parameters for GET requests",
        "properties": {
          "recursive": {
            "type": "boolean",
            "description": "For directories: whether to list recursively"
          }
        }
      },
      "GetResponse": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/SessionFile"
          },
          {
            "$ref": "#/components/schemas/ListResponse_FileInfo"
          }
        ],
        "description": "Unified response for GET that can be file or directory listing"
      },
      "GrepMatch": {
        "type": "object",
        "description": "Grep match result",
        "required": [
          "path",
          "line_number",
          "line"
        ],
        "properties": {
          "line": {
            "type": "string"
          },
          "line_number": {
            "type": "integer",
            "minimum": 0
          },
          "path": {
            "type": "string"
          }
        }
      },
      "GrepRequest": {
        "type": "object",
        "description": "Request to search files",
        "required": [
          "pattern"
        ],
        "properties": {
          "path_pattern": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional path pattern to filter files"
          },
          "pattern": {
            "type": "string",
            "description": "Regex pattern to search for"
          }
        }
      },
      "GrepResult": {
        "type": "object",
        "description": "Grep result for a file",
        "required": [
          "path",
          "matches"
        ],
        "properties": {
          "matches": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GrepMatch"
            }
          },
          "path": {
            "type": "string"
          }
        }
      },
      "ImageContentPart": {
        "type": "object",
        "description": "Image content part (base64 or URL)",
        "properties": {
          "base64": {
            "type": [
              "string",
              "null"
            ]
          },
          "media_type": {
            "type": [
              "string",
              "null"
            ]
          },
          "url": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "ImageFileContentPart": {
        "type": "object",
        "description": "Image file content part (reference to uploaded image)\n\nThis is used for images uploaded via the /images API.\nThe image data is stored separately and referenced by ID.\nNote: Currently filtered out before sending to LLM.",
        "required": [
          "image_id"
        ],
        "properties": {
          "filename": {
            "type": [
              "string",
              "null"
            ],
            "description": "Original filename (for display)"
          },
          "image_id": {
            "type": "string",
            "description": "ID of the uploaded image (format: img_{32-hex})",
            "example": "img_01933b5a00007000800000000000001"
          }
        }
      },
      "InputContentPart": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/TextContentPart",
                "description": "Text content"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "text"
                    ]
                  }
                }
              }
            ],
            "description": "Text content"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageContentPart",
                "description": "Image content (base64 or URL)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "image"
                    ]
                  }
                }
              }
            ],
            "description": "Image content (base64 or URL)"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageFileContentPart",
                "description": "Image file content (reference to uploaded image by ID)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "image_file"
                    ]
                  }
                }
              }
            ],
            "description": "Image file content (reference to uploaded image by ID)"
          }
        ],
        "description": "Input content part - text, image, and image_file (for user input)\n\nThis is a subset of ContentPart that users can send.\nTool calls and results are system-generated."
      },
      "InputMessage": {
        "type": "object",
        "description": "Input message for creating a user message\n\nOnly user messages can be created via the API.\nAgent messages are created internally by the workflow.",
        "required": [
          "content"
        ],
        "properties": {
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InputContentPart"
            },
            "description": "Array of content parts (text and image only)"
          },
          "role": {
            "$ref": "#/components/schemas/MessageRole",
            "description": "Message role (always \"user\" for API-created messages)"
          }
        }
      },
      "InputMessageData": {
        "type": "object",
        "description": "Data for input.message event",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "$ref": "#/components/schemas/Message",
            "description": "The user message"
          }
        }
      },
      "ListExecutionsQuery": {
        "type": "object",
        "properties": {
          "limit": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Pagination limit (default: 20, max: 100)",
            "minimum": 0
          },
          "offset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Pagination offset",
            "minimum": 0
          },
          "status": {
            "type": [
              "string",
              "null"
            ],
            "description": "Filter by execution status"
          }
        }
      },
      "ListResponse_Agent": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Agent configuration for agentic loop.\nAn agent defines the behavior and capabilities of an AI assistant.",
              "required": [
                "id",
                "name",
                "system_prompt",
                "status",
                "created_at",
                "updated_at"
              ],
              "properties": {
                "capabilities": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AgentCapabilityConfig"
                  },
                  "description": "Capabilities enabled for this agent with per-agent configuration.\nCapabilities add tools and system prompt modifications."
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the agent was created."
                },
                "default_model_id": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Default LLM model ID for this agent.\nCan be overridden at the session level.",
                  "example": "model_01933b5a00007000800000000000001"
                },
                "description": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Human-readable description of what the agent does."
                },
                "id": {
                  "type": "string",
                  "description": "External identifier (agent_<32-hex>). Shown as \"id\" in API.\nClient-supplied or auto-generated.",
                  "example": "agent_01933b5a000070008000000000000001"
                },
                "name": {
                  "type": "string",
                  "description": "Display name of the agent."
                },
                "status": {
                  "$ref": "#/components/schemas/AgentStatus",
                  "description": "Current lifecycle status of the agent."
                },
                "system_prompt": {
                  "type": "string",
                  "description": "System prompt that defines the agent's behavior.\nSent as the first message in every conversation."
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Tags for organizing and filtering agents."
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the agent was last updated."
                },
                "usage": {
                  "oneOf": [
                    {
                      "type": "null"
                    },
                    {
                      "$ref": "#/components/schemas/TokenUsage",
                      "description": "Cumulative token usage across all sessions for this agent."
                    }
                  ]
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_CapabilityInfo": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Public capability information (without internal details)\nThis is what gets returned from the API\nNamed CapabilityInfo to distinguish from the Capability trait",
              "required": [
                "id",
                "name",
                "description",
                "status"
              ],
              "properties": {
                "category": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Category for grouping in UI"
                },
                "dependencies": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "IDs of capabilities that this capability depends on.\nWhen this capability is selected, its dependencies are automatically included."
                },
                "description": {
                  "type": "string",
                  "description": "Description of what this capability provides"
                },
                "icon": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Icon name (for UI rendering)"
                },
                "id": {
                  "type": "string",
                  "description": "Unique capability identifier"
                },
                "is_mcp": {
                  "type": "boolean",
                  "description": "Whether this is an MCP server capability (for UI badge)"
                },
                "name": {
                  "type": "string",
                  "description": "Display name"
                },
                "status": {
                  "type": "string",
                  "description": "Current status"
                },
                "system_prompt": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "System prompt addition contributed by this capability"
                },
                "tool_definitions": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  },
                  "description": "Tool definitions provided by this capability"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_Event": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Standard event following the Everruns event protocol.\n\nAll events have a consistent structure:\n- `id`: Unique event identifier (format: event_{32-hex})\n- `type`: Event type in dot notation (e.g., \"input.message\", \"reason.started\")\n- `ts`: ISO 8601 timestamp with millisecond precision\n- `session_id`: Session this event belongs to (format: session_{32-hex})\n- `context`: Correlation context for tracing\n- `data`: Event-specific payload (typed via EventData enum)\n- `metadata`: Optional arbitrary metadata\n- `tags`: Optional list of tags for filtering",
              "required": [
                "id",
                "type",
                "ts",
                "session_id",
                "context",
                "data"
              ],
              "properties": {
                "context": {
                  "$ref": "#/components/schemas/EventContext",
                  "description": "Correlation context"
                },
                "data": {
                  "$ref": "#/components/schemas/EventData",
                  "description": "Event-specific payload. The schema depends on the event type.\nSee EventData documentation for the mapping of type to data schema."
                },
                "id": {
                  "type": "string",
                  "description": "Unique event identifier (format: event_{32-hex})",
                  "example": "event_01933b5a00007000800000000000001"
                },
                "metadata": {
                  "description": "Arbitrary metadata for the event"
                },
                "sequence": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "format": "int32",
                  "description": "Sequence number within session (for ordering)"
                },
                "session_id": {
                  "type": "string",
                  "description": "Session this event belongs to (format: session_{32-hex})",
                  "example": "session_01933b5a00007000800000000000001"
                },
                "tags": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "items": {
                    "type": "string"
                  },
                  "description": "Tags for filtering and categorization"
                },
                "ts": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Event timestamp"
                },
                "type": {
                  "type": "string",
                  "description": "Event type in dot notation"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_FileInfo": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "File metadata without content",
              "required": [
                "id",
                "session_id",
                "path",
                "name",
                "is_directory",
                "is_readonly",
                "size_bytes",
                "created_at",
                "updated_at"
              ],
              "properties": {
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "is_directory": {
                  "type": "boolean"
                },
                "is_readonly": {
                  "type": "boolean"
                },
                "name": {
                  "type": "string"
                },
                "path": {
                  "type": "string"
                },
                "session_id": {
                  "type": "string",
                  "format": "uuid"
                },
                "size_bytes": {
                  "type": "integer",
                  "format": "int64"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_GrepResult": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Grep result for a file",
              "required": [
                "path",
                "matches"
              ],
              "properties": {
                "matches": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GrepMatch"
                  }
                },
                "path": {
                  "type": "string"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_LlmModel": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "LLM Model entity",
              "required": [
                "id",
                "provider_id",
                "model_id",
                "display_name",
                "capabilities",
                "is_default",
                "is_favorite",
                "status",
                "source",
                "created_at",
                "updated_at"
              ],
              "properties": {
                "capabilities": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "display_name": {
                  "type": "string"
                },
                "id": {
                  "type": "string",
                  "example": "model_01933b5a00007000800000000000001"
                },
                "is_default": {
                  "type": "boolean"
                },
                "is_favorite": {
                  "type": "boolean"
                },
                "model_id": {
                  "type": "string"
                },
                "provider_id": {
                  "type": "string",
                  "example": "provider_01933b5a00007000800000000000001"
                },
                "source": {
                  "$ref": "#/components/schemas/LlmModelSource",
                  "description": "How the model was added to the system"
                },
                "status": {
                  "$ref": "#/components/schemas/LlmModelStatus"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_LlmModelWithProvider": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "LLM Model with provider info",
              "required": [
                "id",
                "provider_id",
                "model_id",
                "display_name",
                "capabilities",
                "is_default",
                "is_favorite",
                "status",
                "source",
                "created_at",
                "updated_at",
                "provider_name",
                "provider_type"
              ],
              "properties": {
                "capabilities": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "display_name": {
                  "type": "string"
                },
                "id": {
                  "type": "string",
                  "example": "model_01933b5a00007000800000000000001"
                },
                "is_default": {
                  "type": "boolean"
                },
                "is_favorite": {
                  "type": "boolean"
                },
                "model_id": {
                  "type": "string"
                },
                "profile": {
                  "oneOf": [
                    {
                      "type": "null"
                    },
                    {
                      "$ref": "#/components/schemas/LlmModelProfile",
                      "description": "Readonly profile with model capabilities (not persisted to database)"
                    }
                  ]
                },
                "provider_id": {
                  "type": "string",
                  "example": "provider_01933b5a00007000800000000000001"
                },
                "provider_name": {
                  "type": "string"
                },
                "provider_type": {
                  "$ref": "#/components/schemas/LlmProviderType"
                },
                "source": {
                  "$ref": "#/components/schemas/LlmModelSource",
                  "description": "How the model was added to the system"
                },
                "status": {
                  "$ref": "#/components/schemas/LlmModelStatus"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_LlmProvider": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "LLM Provider entity (API keys never exposed)\nNote: This is the entity struct, separate from the LlmProvider trait in llm.rs",
              "required": [
                "id",
                "name",
                "provider_type",
                "api_key_set",
                "status",
                "created_at",
                "updated_at"
              ],
              "properties": {
                "api_key_set": {
                  "type": "boolean",
                  "description": "Whether an API key is configured (key is never returned)"
                },
                "base_url": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "id": {
                  "type": "string",
                  "example": "provider_01933b5a00007000800000000000001"
                },
                "last_synced_at": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time",
                  "description": "When models were last synced from provider API"
                },
                "name": {
                  "type": "string"
                },
                "provider_type": {
                  "$ref": "#/components/schemas/LlmProviderType"
                },
                "status": {
                  "$ref": "#/components/schemas/LlmProviderStatus"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_McpServer": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "MCP Server configuration.\nRepresents a remote MCP server that can provide tools and resources.",
              "required": [
                "id",
                "name",
                "url",
                "transport_type",
                "status",
                "api_key_set",
                "created_at",
                "updated_at"
              ],
              "properties": {
                "api_key_set": {
                  "type": "boolean",
                  "description": "Whether an API key has been configured."
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the MCP server was created."
                },
                "description": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Human-readable description of the MCP server.",
                  "example": "Atlassian MCP Server for Jira and Confluence"
                },
                "headers": {
                  "type": "object",
                  "description": "Additional HTTP headers for authentication.\nKeys are header names, values are header values.",
                  "additionalProperties": {
                    "type": "string"
                  },
                  "propertyNames": {
                    "type": "string"
                  }
                },
                "id": {
                  "type": "string",
                  "description": "Unique identifier for the MCP server.",
                  "example": "mcp_01933b5a00007000800000000000001"
                },
                "name": {
                  "type": "string",
                  "description": "Display name of the MCP server.",
                  "example": "atlassian-mcp-server"
                },
                "status": {
                  "$ref": "#/components/schemas/McpServerStatus",
                  "description": "Current lifecycle status of the MCP server."
                },
                "transport_type": {
                  "$ref": "#/components/schemas/McpServerTransportType",
                  "description": "Transport type (currently only HTTP supported)."
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the MCP server was last updated."
                },
                "url": {
                  "type": "string",
                  "description": "URL of the MCP server endpoint.",
                  "example": "https://mcp.atlassian.com/v1/mcp"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_Message": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Message - primary conversation data (API response)",
              "required": [
                "id",
                "session_id",
                "sequence",
                "role",
                "content",
                "created_at"
              ],
              "properties": {
                "content": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ContentPart"
                  },
                  "description": "Array of content parts"
                },
                "controls": {
                  "oneOf": [
                    {
                      "type": "null"
                    },
                    {
                      "$ref": "#/components/schemas/Controls",
                      "description": "Runtime controls (model, reasoning, etc.)"
                    }
                  ]
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "id": {
                  "type": "string",
                  "description": "Unique message ID (format: message_{32-hex})",
                  "example": "message_01933b5a00007000800000000000001"
                },
                "metadata": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "description": "Message-level metadata (locale, etc.)",
                  "additionalProperties": {},
                  "propertyNames": {
                    "type": "string"
                  }
                },
                "role": {
                  "$ref": "#/components/schemas/MessageRole"
                },
                "sequence": {
                  "type": "integer",
                  "format": "int32"
                },
                "session_id": {
                  "type": "string",
                  "description": "Session ID this message belongs to (format: session_{32-hex})",
                  "example": "session_01933b5a00007000800000000000001"
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListResponse_User": {
        "type": "object",
        "description": "Response wrapper for list endpoints.\nAll list endpoints return responses wrapped in a `data` field.",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "User response for listing",
              "required": [
                "id",
                "email",
                "name",
                "roles",
                "created_at"
              ],
              "properties": {
                "auth_provider": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "avatar_url": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "email": {
                  "type": "string"
                },
                "id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "roles": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "description": "Array of items returned by the list operation."
          }
        }
      },
      "ListSchedulesQuery": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Filter by enabled status"
          },
          "limit": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Pagination limit (default: 20, max: 100)",
            "minimum": 0
          },
          "offset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Pagination offset",
            "minimum": 0
          },
          "target_type": {
            "type": [
              "string",
              "null"
            ],
            "description": "Filter by target type (\"workflow\" or \"activity\")"
          }
        }
      },
      "ListUsersQuery": {
        "type": "object",
        "description": "Query parameters for listing users",
        "properties": {
          "search": {
            "type": [
              "string",
              "null"
            ],
            "description": "Search query to filter by name or email"
          }
        }
      },
      "LlmCompactionInfo": {
        "type": "object",
        "description": "Information about context compaction performed before LLM generation\n\nWhen the conversation context exceeds the model's limit, compaction is\nautomatically triggered to compress the context before retrying.",
        "required": [
          "compacted"
        ],
        "properties": {
          "compacted": {
            "type": "boolean",
            "description": "Whether compaction was performed"
          },
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Duration of the compaction operation in milliseconds",
            "minimum": 0
          },
          "input_tokens_after": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Number of input tokens after compaction",
            "minimum": 0
          },
          "input_tokens_before": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Number of input tokens before compaction",
            "minimum": 0
          }
        }
      },
      "LlmGenerationData": {
        "type": "object",
        "description": "Data for llm.generation event\n\nEmitted after each LLM API call to provide full visibility into\nthe messages sent to the model and the response received.",
        "required": [
          "messages",
          "output",
          "metadata"
        ],
        "properties": {
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Message"
            },
            "description": "Messages sent to the LLM (including system prompt)"
          },
          "metadata": {
            "$ref": "#/components/schemas/LlmGenerationMetadata",
            "description": "Metadata about the generation"
          },
          "output": {
            "$ref": "#/components/schemas/LlmGenerationOutput",
            "description": "Output from the LLM"
          },
          "tools": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolDefinitionSummary"
            },
            "description": "Tools available to the LLM for this generation"
          }
        }
      },
      "LlmGenerationMetadata": {
        "type": "object",
        "description": "Metadata about an LLM generation",
        "required": [
          "model",
          "success"
        ],
        "properties": {
          "compaction": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmCompactionInfo",
                "description": "Compaction information if context was compressed before generation\nOccurs when the conversation context exceeded the model's limit"
              }
            ]
          },
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Duration of the generation in milliseconds",
            "minimum": 0
          },
          "error": {
            "type": [
              "string",
              "null"
            ],
            "description": "Error message if generation failed"
          },
          "finish_reasons": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Finish reasons from the LLM (e.g., [\"stop\"], [\"tool_calls\"])\nRequired for gen-ai semantic conventions"
          },
          "model": {
            "type": "string",
            "description": "Model identifier used for generation"
          },
          "provider": {
            "type": [
              "string",
              "null"
            ],
            "description": "Provider type (openai, anthropic, etc.)"
          },
          "response_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Unique response identifier from the LLM provider\nRequired for gen-ai semantic conventions"
          },
          "retry": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmRetryInfo",
                "description": "Retry information if rate limit retries occurred\nContains number of retries and total wait time"
              }
            ]
          },
          "success": {
            "type": "boolean",
            "description": "Whether the generation was successful"
          },
          "time_to_first_token_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Time to first token in milliseconds (streaming latency)",
            "minimum": 0
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Token usage statistics"
              }
            ]
          }
        }
      },
      "LlmGenerationOutput": {
        "type": "object",
        "description": "LLM generation output",
        "properties": {
          "text": {
            "type": [
              "string",
              "null"
            ],
            "description": "Text response from the model"
          },
          "tool_calls": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolCall"
            },
            "description": "Tool calls requested by the model"
          }
        }
      },
      "LlmModel": {
        "type": "object",
        "description": "LLM Model entity",
        "required": [
          "id",
          "provider_id",
          "model_id",
          "display_name",
          "capabilities",
          "is_default",
          "is_favorite",
          "status",
          "source",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "display_name": {
            "type": "string"
          },
          "id": {
            "type": "string",
            "example": "model_01933b5a00007000800000000000001"
          },
          "is_default": {
            "type": "boolean"
          },
          "is_favorite": {
            "type": "boolean"
          },
          "model_id": {
            "type": "string"
          },
          "provider_id": {
            "type": "string",
            "example": "provider_01933b5a00007000800000000000001"
          },
          "source": {
            "$ref": "#/components/schemas/LlmModelSource",
            "description": "How the model was added to the system"
          },
          "status": {
            "$ref": "#/components/schemas/LlmModelStatus"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LlmModelCost": {
        "type": "object",
        "description": "Cost information for the model (per million tokens)",
        "required": [
          "input",
          "output"
        ],
        "properties": {
          "cache_read": {
            "type": [
              "number",
              "null"
            ],
            "format": "double",
            "description": "Cached read cost per million tokens (USD), if supported"
          },
          "input": {
            "type": "number",
            "format": "double",
            "description": "Input cost per million tokens (USD)"
          },
          "output": {
            "type": "number",
            "format": "double",
            "description": "Output cost per million tokens (USD)"
          }
        }
      },
      "LlmModelLimits": {
        "type": "object",
        "description": "Token limits for the model",
        "required": [
          "context",
          "output"
        ],
        "properties": {
          "context": {
            "type": "integer",
            "format": "int32",
            "description": "Maximum context window size in tokens"
          },
          "output": {
            "type": "integer",
            "format": "int32",
            "description": "Maximum output tokens"
          }
        }
      },
      "LlmModelModalities": {
        "type": "object",
        "description": "Model modalities for input and output",
        "required": [
          "input",
          "output"
        ],
        "properties": {
          "input": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Modality"
            },
            "description": "Supported input modalities"
          },
          "output": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Modality"
            },
            "description": "Supported output modalities"
          }
        }
      },
      "LlmModelProfile": {
        "type": "object",
        "description": "LLM Model Profile describing model capabilities\nBased on models.dev structure (https://models.dev/api.json)\n\nNOTE: Currently only includes profiles for:\n- OpenAI: gpt-4o, gpt-4o-mini, o1, o1-mini, o1-pro, o3-mini\n- Anthropic: claude-3-5-sonnet, claude-3-5-haiku, claude-3-opus, claude-3-sonnet, claude-3-haiku, claude-sonnet-4, claude-opus-4\n\nAdditional model profiles can be added as needed.",
        "required": [
          "name",
          "family",
          "attachment",
          "reasoning",
          "temperature",
          "tool_call",
          "structured_output",
          "open_weights"
        ],
        "properties": {
          "attachment": {
            "type": "boolean",
            "description": "Whether the model supports file/image attachments"
          },
          "cost": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmModelCost",
                "description": "Cost per million tokens"
              }
            ]
          },
          "family": {
            "type": "string",
            "description": "Model family (e.g., \"gpt-4o\", \"claude-3-5-sonnet\")"
          },
          "knowledge": {
            "type": [
              "string",
              "null"
            ],
            "description": "Knowledge cutoff date (YYYY-MM-DD format)"
          },
          "last_updated": {
            "type": [
              "string",
              "null"
            ],
            "description": "Last updated date (YYYY-MM-DD format)"
          },
          "limits": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmModelLimits",
                "description": "Token limits"
              }
            ]
          },
          "modalities": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmModelModalities",
                "description": "Supported modalities"
              }
            ]
          },
          "name": {
            "type": "string",
            "description": "Display name of the model"
          },
          "open_weights": {
            "type": "boolean",
            "description": "Whether the model has open weights"
          },
          "reasoning": {
            "type": "boolean",
            "description": "Whether the model has reasoning/chain-of-thought capabilities"
          },
          "reasoning_effort": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ReasoningEffortConfig",
                "description": "Reasoning effort configuration (for reasoning models)"
              }
            ]
          },
          "release_date": {
            "type": [
              "string",
              "null"
            ],
            "description": "Release date (YYYY-MM-DD format)"
          },
          "structured_output": {
            "type": "boolean",
            "description": "Whether the model supports structured output (JSON mode)"
          },
          "temperature": {
            "type": "boolean",
            "description": "Whether temperature control is supported"
          },
          "tool_call": {
            "type": "boolean",
            "description": "Whether the model supports tool/function calling"
          }
        }
      },
      "LlmModelSource": {
        "type": "string",
        "description": "How the model was added to the system",
        "enum": [
          "manual",
          "discovered",
          "predefined"
        ]
      },
      "LlmModelStatus": {
        "type": "string",
        "description": "LLM model status",
        "enum": [
          "active",
          "disabled"
        ]
      },
      "LlmModelWithProvider": {
        "type": "object",
        "description": "LLM Model with provider info",
        "required": [
          "id",
          "provider_id",
          "model_id",
          "display_name",
          "capabilities",
          "is_default",
          "is_favorite",
          "status",
          "source",
          "created_at",
          "updated_at",
          "provider_name",
          "provider_type"
        ],
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "display_name": {
            "type": "string"
          },
          "id": {
            "type": "string",
            "example": "model_01933b5a00007000800000000000001"
          },
          "is_default": {
            "type": "boolean"
          },
          "is_favorite": {
            "type": "boolean"
          },
          "model_id": {
            "type": "string"
          },
          "profile": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmModelProfile",
                "description": "Readonly profile with model capabilities (not persisted to database)"
              }
            ]
          },
          "provider_id": {
            "type": "string",
            "example": "provider_01933b5a00007000800000000000001"
          },
          "provider_name": {
            "type": "string"
          },
          "provider_type": {
            "$ref": "#/components/schemas/LlmProviderType"
          },
          "source": {
            "$ref": "#/components/schemas/LlmModelSource",
            "description": "How the model was added to the system"
          },
          "status": {
            "$ref": "#/components/schemas/LlmModelStatus"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LlmProvider": {
        "type": "object",
        "description": "LLM Provider entity (API keys never exposed)\nNote: This is the entity struct, separate from the LlmProvider trait in llm.rs",
        "required": [
          "id",
          "name",
          "provider_type",
          "api_key_set",
          "status",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "api_key_set": {
            "type": "boolean",
            "description": "Whether an API key is configured (key is never returned)"
          },
          "base_url": {
            "type": [
              "string",
              "null"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "id": {
            "type": "string",
            "example": "provider_01933b5a00007000800000000000001"
          },
          "last_synced_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "When models were last synced from provider API"
          },
          "name": {
            "type": "string"
          },
          "provider_type": {
            "$ref": "#/components/schemas/LlmProviderType"
          },
          "status": {
            "$ref": "#/components/schemas/LlmProviderStatus"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LlmProviderStatus": {
        "type": "string",
        "description": "LLM provider status",
        "enum": [
          "active",
          "disabled"
        ]
      },
      "LlmProviderType": {
        "type": "string",
        "description": "LLM provider type",
        "enum": [
          "openai",
          "openai_completions",
          "anthropic",
          "llmsim"
        ]
      },
      "LlmRetryInfo": {
        "type": "object",
        "description": "Information about rate limit retries during LLM generation",
        "required": [
          "attempts",
          "total_wait_ms"
        ],
        "properties": {
          "attempts": {
            "type": "integer",
            "format": "int32",
            "description": "Number of retry attempts made (0 = succeeded on first try)",
            "minimum": 0
          },
          "total_wait_ms": {
            "type": "integer",
            "format": "int64",
            "description": "Total time spent waiting between retries in milliseconds",
            "minimum": 0
          }
        }
      },
      "McpServer": {
        "type": "object",
        "description": "MCP Server configuration.\nRepresents a remote MCP server that can provide tools and resources.",
        "required": [
          "id",
          "name",
          "url",
          "transport_type",
          "status",
          "api_key_set",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "api_key_set": {
            "type": "boolean",
            "description": "Whether an API key has been configured."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the MCP server was created."
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Human-readable description of the MCP server.",
            "example": "Atlassian MCP Server for Jira and Confluence"
          },
          "headers": {
            "type": "object",
            "description": "Additional HTTP headers for authentication.\nKeys are header names, values are header values.",
            "additionalProperties": {
              "type": "string"
            },
            "propertyNames": {
              "type": "string"
            }
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for the MCP server.",
            "example": "mcp_01933b5a00007000800000000000001"
          },
          "name": {
            "type": "string",
            "description": "Display name of the MCP server.",
            "example": "atlassian-mcp-server"
          },
          "status": {
            "$ref": "#/components/schemas/McpServerStatus",
            "description": "Current lifecycle status of the MCP server."
          },
          "transport_type": {
            "$ref": "#/components/schemas/McpServerTransportType",
            "description": "Transport type (currently only HTTP supported)."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the MCP server was last updated."
          },
          "url": {
            "type": "string",
            "description": "URL of the MCP server endpoint.",
            "example": "https://mcp.atlassian.com/v1/mcp"
          }
        }
      },
      "McpServerStatus": {
        "type": "string",
        "description": "MCP Server lifecycle status.\n- `active`: Server is available for use\n- `disabled`: Server is disabled and not used",
        "enum": [
          "active",
          "disabled"
        ]
      },
      "McpServerTransportType": {
        "type": "string",
        "description": "MCP Server transport type.\nCurrently only HTTP is supported.",
        "enum": [
          "http"
        ]
      },
      "Message": {
        "type": "object",
        "description": "A message in the conversation",
        "required": [
          "id",
          "role",
          "content",
          "created_at"
        ],
        "properties": {
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContentPart"
            },
            "description": "Message content as array of content parts (text, images, tool calls, tool results)"
          },
          "controls": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Controls",
                "description": "Runtime controls (model, reasoning, etc.)"
              }
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the message was created"
          },
          "id": {
            "type": "string",
            "description": "Unique message ID (format: message_{32-hex})",
            "example": "message_01933b5a00007000800000000000001"
          },
          "metadata": {
            "type": [
              "object",
              "null"
            ],
            "description": "Message-level metadata"
          },
          "role": {
            "$ref": "#/components/schemas/MessageRole",
            "description": "Message role"
          },
          "thinking": {
            "type": [
              "string",
              "null"
            ],
            "description": "Thinking content from extended thinking models (Anthropic Claude)\nThis is the model's chain-of-thought reasoning before producing the response.\nMust be included in subsequent API calls when thinking is enabled."
          },
          "thinking_signature": {
            "type": [
              "string",
              "null"
            ],
            "description": "Cryptographic signature for thinking content (Anthropic Claude)\nRequired when sending thinking back in subsequent API calls."
          }
        }
      },
      "MessageRole": {
        "type": "string",
        "description": "Message role in the conversation",
        "enum": [
          "system",
          "user",
          "agent",
          "tool_result"
        ]
      },
      "Modality": {
        "type": "string",
        "description": "Modality type (text, image, audio, video)",
        "enum": [
          "text",
          "image",
          "audio",
          "video"
        ]
      },
      "ModelMetadata": {
        "type": "object",
        "description": "Metadata about the model used for generation",
        "required": [
          "model"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "Model name (e.g., \"gpt-4o\", \"claude-3-sonnet\")"
          },
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "Model ID (internal identifier)"
          },
          "provider_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "Provider ID (internal identifier)"
          }
        }
      },
      "MoveFileRequest": {
        "type": "object",
        "description": "Request to move/rename a file",
        "required": [
          "src_path",
          "dst_path"
        ],
        "properties": {
          "dst_path": {
            "type": "string",
            "description": "Destination path"
          },
          "src_path": {
            "type": "string",
            "description": "Source path"
          }
        }
      },
      "OutputMessageCompletedData": {
        "type": "object",
        "description": "Data for output.message.completed event",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "$ref": "#/components/schemas/Message",
            "description": "The agent message"
          },
          "metadata": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ModelMetadata",
                "description": "Metadata about the model used"
              }
            ]
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Token usage"
              }
            ]
          }
        }
      },
      "OutputMessageDeltaData": {
        "type": "object",
        "description": "Data for output.message.delta event\n\nIncremental text update during LLM generation. Events are batched (~100ms)\nto reduce volume while providing real-time feedback.",
        "required": [
          "turn_id",
          "delta",
          "accumulated"
        ],
        "properties": {
          "accumulated": {
            "type": "string",
            "description": "Accumulated text so far"
          },
          "delta": {
            "type": "string",
            "description": "The new text chunk"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID this delta belongs to",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "OutputMessageStartedData": {
        "type": "object",
        "description": "Data for output.message.started event\n\nEmitted when the LLM starts generating a response. UI can show a\n\"thinking\" indicator until output.message.delta or output.message.completed events arrive.",
        "required": [
          "turn_id"
        ],
        "properties": {
          "model": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional model name being used"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID this output belongs to",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "PaginatedResponse_Session": {
        "type": "object",
        "description": "Response wrapper for paginated list endpoints.\nIncludes pagination metadata along with the data array.",
        "required": [
          "data",
          "total",
          "offset",
          "limit"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Session - instance of agentic loop execution.\nA session represents a single conversation with an agent.",
              "required": [
                "id",
                "organization_id",
                "agent_id",
                "status",
                "created_at",
                "updated_at"
              ],
              "properties": {
                "agent_id": {
                  "type": "string",
                  "description": "ID of the agent working in this session (format: agent_{32-hex}).",
                  "example": "agent_01933b5a00007000800000000000001"
                },
                "capabilities": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AgentCapabilityConfig"
                  },
                  "description": "Session-level capabilities (additive to agent capabilities).\nApplied after agent capabilities when building RuntimeAgent."
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the session was created."
                },
                "finished_at": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time",
                  "description": "Timestamp when the session finished (completed or failed)."
                },
                "id": {
                  "type": "string",
                  "description": "Unique identifier for the session (format: session_{32-hex}).",
                  "example": "session_01933b5a00007000800000000000001"
                },
                "model_id": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "LLM model ID to use for this session (format: model_{32-hex}).\nOverrides the agent's default model if set.",
                  "example": "model_01933b5a00007000800000000000001"
                },
                "organization_id": {
                  "type": "string",
                  "description": "Organization this session belongs to (format: org_{32-hex}).",
                  "example": "org_00000000000000000000000000000001"
                },
                "output_preview": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Preview text from the last assistant response (truncated)."
                },
                "preview": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Preview text from the first user message (truncated)."
                },
                "started_at": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time",
                  "description": "Timestamp when the session started executing."
                },
                "status": {
                  "$ref": "#/components/schemas/SessionStatus",
                  "description": "Current execution status of the session."
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Tags for organizing and filtering sessions."
                },
                "title": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Human-readable title for the session."
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the session was last updated."
                },
                "usage": {
                  "oneOf": [
                    {
                      "type": "null"
                    },
                    {
                      "$ref": "#/components/schemas/TokenUsage",
                      "description": "Cumulative token usage for all LLM calls in this session."
                    }
                  ]
                }
              }
            },
            "description": "Array of items returned by the list operation."
          },
          "limit": {
            "type": "integer",
            "format": "int32",
            "description": "Maximum number of items per page.",
            "minimum": 0
          },
          "offset": {
            "type": "integer",
            "format": "int32",
            "description": "Current offset (starting position).",
            "minimum": 0
          },
          "total": {
            "type": "integer",
            "format": "int32",
            "description": "Total number of items matching the query (across all pages).",
            "minimum": 0
          }
        }
      },
      "ReasonCompletedData": {
        "type": "object",
        "description": "Data for reason.completed event",
        "required": [
          "success",
          "has_tool_calls",
          "tool_call_count"
        ],
        "properties": {
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Duration of the reason phase in milliseconds",
            "minimum": 0
          },
          "error": {
            "type": [
              "string",
              "null"
            ],
            "description": "Error message if failed"
          },
          "has_tool_calls": {
            "type": "boolean",
            "description": "Whether tool calls were requested"
          },
          "success": {
            "type": "boolean",
            "description": "Whether the LLM call succeeded"
          },
          "text_preview": {
            "type": [
              "string",
              "null"
            ],
            "description": "Text response preview (first 200 chars)"
          },
          "tool_call_count": {
            "type": "integer",
            "format": "int32",
            "description": "Number of tool calls requested",
            "minimum": 0
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Token usage from the LLM call"
              }
            ]
          }
        }
      },
      "ReasonStartedData": {
        "type": "object",
        "description": "Data for reason.started event",
        "required": [
          "agent_id"
        ],
        "properties": {
          "agent_id": {
            "$ref": "#/components/schemas/TypedId",
            "description": "Agent ID being used"
          },
          "metadata": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ModelMetadata",
                "description": "Metadata about the model being used"
              }
            ]
          }
        }
      },
      "ReasonThinkingCompletedData": {
        "type": "object",
        "description": "Data for reason.thinking.completed event\n\nEmitted when extended thinking completes and the model transitions\nto producing the final response. Contains the complete thinking content.",
        "required": [
          "turn_id",
          "thinking"
        ],
        "properties": {
          "thinking": {
            "type": "string",
            "description": "Complete thinking content"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID this thinking belongs to",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "ReasonThinkingDeltaData": {
        "type": "object",
        "description": "Data for reason.thinking.delta event (extended thinking content from models like Claude)\n\nThis event streams incremental thinking/reasoning content from models that support\nextended thinking mode (e.g., Claude with thinking enabled). The thinking content\nrepresents the model's chain-of-thought reasoning before producing the final response.",
        "required": [
          "turn_id",
          "delta",
          "accumulated"
        ],
        "properties": {
          "accumulated": {
            "type": "string",
            "description": "Accumulated thinking text so far (convenience for UI)"
          },
          "delta": {
            "type": "string",
            "description": "The thinking delta (new thinking text since last delta)"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID this delta belongs to (for correlation)",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "ReasonThinkingStartedData": {
        "type": "object",
        "description": "Data for reason.thinking.started event\n\nEmitted when extended thinking begins during reasoning phase.\nThis signals the model is using chain-of-thought reasoning.\nUI can show a \"thinking\" indicator.",
        "required": [
          "turn_id"
        ],
        "properties": {
          "model": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional model name being used"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID this thinking belongs to",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "ReasoningConfig": {
        "type": "object",
        "description": "Reasoning configuration for the model",
        "properties": {
          "effort": {
            "type": [
              "string",
              "null"
            ],
            "description": "Effort level for reasoning (low, medium, high)"
          }
        }
      },
      "ReasoningEffort": {
        "type": "string",
        "description": "Reasoning effort level for models that support it",
        "enum": [
          "none",
          "minimal",
          "low",
          "medium",
          "high",
          "xhigh"
        ]
      },
      "ReasoningEffortConfig": {
        "type": "object",
        "description": "Reasoning effort configuration for a model",
        "required": [
          "values",
          "default"
        ],
        "properties": {
          "default": {
            "$ref": "#/components/schemas/ReasoningEffort",
            "description": "Default reasoning effort for this model"
          },
          "values": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReasoningEffortValue"
            },
            "description": "Available reasoning effort values for this model"
          }
        }
      },
      "ReasoningEffortValue": {
        "type": "object",
        "description": "Named reasoning effort value for UI display",
        "required": [
          "value",
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Display name (e.g., \"Low\", \"Medium\")"
          },
          "value": {
            "$ref": "#/components/schemas/ReasoningEffort",
            "description": "The API value (e.g., \"low\", \"medium\")"
          }
        }
      },
      "ScheduleExecutionResponse": {
        "type": "object",
        "description": "Schedule execution response",
        "required": [
          "id",
          "schedule_id",
          "scheduled_at",
          "started_at",
          "status",
          "created_at"
        ],
        "properties": {
          "completed_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32"
          },
          "error": {
            "type": [
              "string",
              "null"
            ]
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "schedule_id": {
            "type": "string",
            "format": "uuid"
          },
          "scheduled_at": {
            "type": "string",
            "format": "date-time"
          },
          "started_at": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "string"
          },
          "task_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          },
          "workflow_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          }
        }
      },
      "ScheduleExecutionsListResponse": {
        "type": "object",
        "description": "Schedule executions list response",
        "required": [
          "data",
          "total"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScheduleExecutionResponse"
            }
          },
          "total": {
            "type": "integer",
            "minimum": 0
          }
        }
      },
      "ScheduleResponse": {
        "type": "object",
        "description": "Schedule response",
        "required": [
          "id",
          "name",
          "cron_expression",
          "timezone",
          "target",
          "enabled",
          "catch_up_missed",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "catch_up_missed": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "cron_expression": {
            "type": "string"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "enabled": {
            "type": "boolean"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "last_triggered_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "max_catch_up": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "max_concurrent": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "name": {
            "type": "string"
          },
          "next_trigger_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "retry_policy": {},
          "target": {
            "$ref": "#/components/schemas/ScheduleTargetResponse"
          },
          "timezone": {
            "type": "string"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ScheduleStatsResponse": {
        "type": "object",
        "description": "Schedule stats response",
        "required": [
          "total_executions",
          "successful_executions",
          "failed_executions",
          "skipped_executions"
        ],
        "properties": {
          "avg_duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "minimum": 0
          },
          "failed_executions": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "last_execution_status": {
            "type": [
              "string",
              "null"
            ]
          },
          "skipped_executions": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "successful_executions": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "total_executions": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          }
        }
      },
      "ScheduleTarget": {
        "type": "object",
        "description": "Target for a schedule - either a workflow or activity",
        "required": [
          "type",
          "name"
        ],
        "properties": {
          "input": {
            "description": "Input JSON for the workflow/activity"
          },
          "name": {
            "type": "string",
            "description": "Workflow type name or activity type name"
          },
          "type": {
            "type": "string",
            "description": "Target type: \"workflow\" or \"activity\""
          }
        }
      },
      "ScheduleTargetResponse": {
        "type": "object",
        "description": "Schedule target response",
        "required": [
          "type",
          "name",
          "input"
        ],
        "properties": {
          "input": {},
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          }
        }
      },
      "SchedulesListResponse": {
        "type": "object",
        "description": "Schedules list response",
        "required": [
          "data",
          "total"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScheduleResponse"
            }
          },
          "total": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          }
        }
      },
      "Session": {
        "type": "object",
        "description": "Session - instance of agentic loop execution.\nA session represents a single conversation with an agent.",
        "required": [
          "id",
          "organization_id",
          "agent_id",
          "status",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "agent_id": {
            "type": "string",
            "description": "ID of the agent working in this session (format: agent_{32-hex}).",
            "example": "agent_01933b5a00007000800000000000001"
          },
          "capabilities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentCapabilityConfig"
            },
            "description": "Session-level capabilities (additive to agent capabilities).\nApplied after agent capabilities when building RuntimeAgent."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the session was created."
          },
          "finished_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Timestamp when the session finished (completed or failed)."
          },
          "id": {
            "type": "string",
            "description": "Unique identifier for the session (format: session_{32-hex}).",
            "example": "session_01933b5a00007000800000000000001"
          },
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "LLM model ID to use for this session (format: model_{32-hex}).\nOverrides the agent's default model if set.",
            "example": "model_01933b5a00007000800000000000001"
          },
          "organization_id": {
            "type": "string",
            "description": "Organization this session belongs to (format: org_{32-hex}).",
            "example": "org_00000000000000000000000000000001"
          },
          "output_preview": {
            "type": [
              "string",
              "null"
            ],
            "description": "Preview text from the last assistant response (truncated)."
          },
          "preview": {
            "type": [
              "string",
              "null"
            ],
            "description": "Preview text from the first user message (truncated)."
          },
          "started_at": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time",
            "description": "Timestamp when the session started executing."
          },
          "status": {
            "$ref": "#/components/schemas/SessionStatus",
            "description": "Current execution status of the session."
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for organizing and filtering sessions."
          },
          "title": {
            "type": [
              "string",
              "null"
            ],
            "description": "Human-readable title for the session."
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the session was last updated."
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Cumulative token usage for all LLM calls in this session."
              }
            ]
          }
        }
      },
      "SessionActivatedData": {
        "type": "object",
        "description": "Data for session.activated event (turn started, session now active)",
        "required": [
          "turn_id",
          "input_message_id"
        ],
        "properties": {
          "input_message_id": {
            "type": "string",
            "description": "Input message ID that triggered the turn",
            "example": "message_01933b5a00007000800000000000001"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID that activated the session",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "SessionFile": {
        "type": "object",
        "description": "Complete file with content",
        "required": [
          "id",
          "session_id",
          "path",
          "name",
          "is_directory",
          "is_readonly",
          "size_bytes",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "content": {
            "type": [
              "string",
              "null"
            ],
            "description": "Base64-encoded content for binary files, plain text for text files"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "encoding": {
            "type": "string",
            "description": "Content encoding: \"text\" or \"base64\""
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "is_directory": {
            "type": "boolean"
          },
          "is_readonly": {
            "type": "boolean"
          },
          "name": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "session_id": {
            "type": "string",
            "format": "uuid"
          },
          "size_bytes": {
            "type": "integer",
            "format": "int64"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SessionIdledData": {
        "type": "object",
        "description": "Data for session.idled event (turn completed, session now idle)",
        "required": [
          "turn_id"
        ],
        "properties": {
          "iterations": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Number of iterations in the completed turn",
            "minimum": 0
          },
          "turn_id": {
            "type": "string",
            "description": "Turn ID that just completed",
            "example": "turn_01933b5a00007000800000000000001"
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Cumulative token usage for the session at this point"
              }
            ]
          }
        }
      },
      "SessionStartedData": {
        "type": "object",
        "description": "Data for session.started event",
        "required": [
          "agent_id"
        ],
        "properties": {
          "agent_id": {
            "type": "string",
            "description": "Agent ID",
            "example": "agent_01933b5a00007000800000000000001"
          },
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Model ID if specified",
            "example": "model_01933b5a00007000800000000000001"
          }
        }
      },
      "SessionStatus": {
        "type": "string",
        "description": "Session execution status.\n- `started`: Session just created, no turn executed yet\n- `active`: A turn is currently running\n- `idle`: Turn completed, session waiting for next input",
        "enum": [
          "started",
          "active",
          "idle"
        ]
      },
      "StatRequest": {
        "type": "object",
        "description": "Request to get file stat",
        "required": [
          "path"
        ],
        "properties": {
          "path": {
            "type": "string",
            "description": "Path to the file or directory"
          }
        }
      },
      "TextContentPart": {
        "type": "object",
        "description": "Text content part",
        "required": [
          "text"
        ],
        "properties": {
          "text": {
            "type": "string"
          }
        }
      },
      "TokenUsage": {
        "type": "object",
        "description": "Token usage statistics\n\nTracks token consumption per LLM call including cache tokens for cost optimization.\nCache tokens are provider-specific:\n- OpenAI: `cache_read_tokens` from prompt_tokens_details.cached_tokens\n- Anthropic: `cache_read_tokens` from cache_read_input_tokens,\n  `cache_creation_tokens` from cache_creation_input_tokens",
        "required": [
          "input_tokens",
          "output_tokens"
        ],
        "properties": {
          "cache_creation_tokens": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Number of tokens written to cache (Anthropic-specific)",
            "minimum": 0
          },
          "cache_read_tokens": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Number of tokens read from cache (reduces cost)",
            "minimum": 0
          },
          "input_tokens": {
            "type": "integer",
            "format": "int32",
            "description": "Number of input/prompt tokens",
            "minimum": 0
          },
          "output_tokens": {
            "type": "integer",
            "format": "int32",
            "description": "Number of output/completion tokens",
            "minimum": 0
          }
        }
      },
      "ToolCall": {
        "type": "object",
        "description": "Tool call from LLM response",
        "required": [
          "id",
          "name",
          "arguments"
        ],
        "properties": {
          "arguments": {
            "type": "object",
            "description": "Arguments as JSON"
          },
          "id": {
            "type": "string",
            "description": "Unique ID for this tool call"
          },
          "name": {
            "type": "string",
            "description": "Tool name to execute"
          }
        }
      },
      "ToolCallContentPart": {
        "type": "object",
        "description": "Tool call content part (assistant requesting tool execution)",
        "required": [
          "id",
          "name",
          "arguments"
        ],
        "properties": {
          "arguments": {},
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "ToolCallSummary": {
        "type": "object",
        "description": "Summary of a tool call (compact form without arguments)",
        "required": [
          "id",
          "name"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "ToolCompletedData": {
        "type": "object",
        "description": "Data for tool.completed event",
        "required": [
          "tool_call_id",
          "tool_name",
          "success",
          "status"
        ],
        "properties": {
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Duration of the tool call in milliseconds",
            "minimum": 0
          },
          "error": {
            "type": [
              "string",
              "null"
            ],
            "description": "Error message if failed"
          },
          "result": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/ContentPart"
            },
            "description": "Result content (for successful calls)"
          },
          "status": {
            "type": "string",
            "description": "Status: \"success\", \"error\", \"timeout\", \"cancelled\""
          },
          "success": {
            "type": "boolean",
            "description": "Whether the tool call succeeded"
          },
          "tool_call_id": {
            "type": "string",
            "description": "Tool call ID"
          },
          "tool_name": {
            "type": "string",
            "description": "Tool name"
          }
        }
      },
      "ToolDefinitionSummary": {
        "type": "object",
        "description": "Summary of a tool definition (compact form for events)",
        "required": [
          "name",
          "description"
        ],
        "properties": {
          "description": {
            "type": "string",
            "description": "Tool description"
          },
          "name": {
            "type": "string",
            "description": "Tool name"
          }
        }
      },
      "ToolResultContentPart": {
        "type": "object",
        "description": "Tool result content part (result of tool execution)",
        "required": [
          "tool_call_id"
        ],
        "properties": {
          "error": {
            "type": [
              "string",
              "null"
            ]
          },
          "result": {},
          "tool_call_id": {
            "type": "string",
            "description": "ID of the tool call this result corresponds to"
          }
        }
      },
      "ToolStartedData": {
        "type": "object",
        "description": "Data for tool.started event",
        "required": [
          "tool_call"
        ],
        "properties": {
          "tool_call": {
            "$ref": "#/components/schemas/ToolCall",
            "description": "The tool call being executed"
          }
        }
      },
      "TriggerResponse": {
        "type": "object",
        "description": "Manual trigger response",
        "required": [
          "execution_id"
        ],
        "properties": {
          "execution_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "TurnCancelledData": {
        "type": "object",
        "description": "Data for turn.cancelled event",
        "required": [
          "turn_id"
        ],
        "properties": {
          "reason": {
            "type": [
              "string",
              "null"
            ],
            "description": "Reason for cancellation"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn identifier",
            "example": "turn_01933b5a00007000800000000000001"
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Token usage before cancellation (if available)"
              }
            ]
          }
        }
      },
      "TurnCompletedData": {
        "type": "object",
        "description": "Data for turn.completed event",
        "required": [
          "turn_id",
          "iterations"
        ],
        "properties": {
          "duration_ms": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64",
            "description": "Duration in milliseconds",
            "minimum": 0
          },
          "input_content": {
            "type": [
              "string",
              "null"
            ],
            "description": "Input message content (for observability, passed through from turn.started)"
          },
          "iterations": {
            "type": "integer",
            "format": "int32",
            "description": "Number of iterations in this turn",
            "minimum": 0
          },
          "turn_id": {
            "type": "string",
            "description": "Turn identifier",
            "example": "turn_01933b5a00007000800000000000001"
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenUsage",
                "description": "Aggregated token usage for all LLM calls in this turn"
              }
            ]
          }
        }
      },
      "TurnFailedData": {
        "type": "object",
        "description": "Data for turn.failed event",
        "required": [
          "turn_id",
          "error"
        ],
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "error_code": {
            "type": [
              "string",
              "null"
            ],
            "description": "Error code"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn identifier",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "TurnStartedData": {
        "type": "object",
        "description": "Data for turn.started event",
        "required": [
          "turn_id",
          "input_message_id"
        ],
        "properties": {
          "input_content": {
            "type": [
              "string",
              "null"
            ],
            "description": "Input message content (for observability)"
          },
          "input_message_id": {
            "type": "string",
            "description": "Input message ID that triggered this turn",
            "example": "message_01933b5a00007000800000000000001"
          },
          "turn_id": {
            "type": "string",
            "description": "Turn identifier",
            "example": "turn_01933b5a00007000800000000000001"
          }
        }
      },
      "TypedId": {
        "type": "string",
        "description": "Prefixed identifier with 'agent' prefix",
        "example": "agent_01933b5a00007000800000000000001",
        "pattern": "^agent_[0-9a-f]{32}$"
      },
      "UpdateAgentRequest": {
        "type": "object",
        "description": "Request to update an agent. Only provided fields will be updated.",
        "properties": {
          "capabilities": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/AgentCapabilityConfig"
            },
            "description": "Capabilities to enable for this agent with per-agent configuration.\nReplaces existing capabilities. Each has a `ref` (capability ID) and optional `config`.",
            "example": [
              {
                "config": {},
                "ref": "current_time"
              },
              {
                "config": {},
                "ref": "web_fetch"
              }
            ]
          },
          "default_model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "The ID of the default LLM model to use for this agent.",
            "example": "model_01933b5a00007000800000000000001"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "A human-readable description of what the agent does.",
            "example": "Updated description for the agent"
          },
          "name": {
            "type": [
              "string",
              "null"
            ],
            "description": "The name of the agent. Used for display purposes.",
            "example": "Updated Support Agent"
          },
          "status": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/AgentStatus",
                "description": "The status of the agent. Set to \"archived\" to soft-delete."
              }
            ]
          },
          "system_prompt": {
            "type": [
              "string",
              "null"
            ],
            "description": "The system prompt that defines the agent's behavior and capabilities.",
            "example": "You are an updated helpful assistant."
          },
          "tags": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Tags for organizing and filtering agents.",
            "example": [
              "updated-tag"
            ]
          }
        }
      },
      "UpdateFileRequest": {
        "type": "object",
        "description": "Request to update a file",
        "properties": {
          "content": {
            "type": [
              "string",
              "null"
            ],
            "description": "New file content"
          },
          "encoding": {
            "type": [
              "string",
              "null"
            ],
            "description": "Content encoding: \"text\" or \"base64\""
          },
          "is_readonly": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Whether file is read-only"
          }
        }
      },
      "UpdateLlmModelRequest": {
        "type": "object",
        "description": "Request to update an LLM model. Only provided fields will be updated.",
        "properties": {
          "capabilities": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "List of capabilities this model supports.",
            "example": [
              "chat",
              "tools"
            ]
          },
          "display_name": {
            "type": [
              "string",
              "null"
            ],
            "description": "Human-readable display name for the model.",
            "example": "GPT-4o Mini"
          },
          "is_default": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Whether this model should be the default for the provider.",
            "example": true
          },
          "is_favorite": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Whether this model should be marked as a favorite for quick access.",
            "example": true
          },
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "The model identifier used by the provider's API.",
            "example": "gpt-4o-mini"
          },
          "status": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmModelStatus",
                "description": "The status of the model. Set to \"inactive\" to disable."
              }
            ]
          }
        }
      },
      "UpdateLlmProviderRequest": {
        "type": "object",
        "description": "Request to update an LLM provider. Only provided fields will be updated.",
        "properties": {
          "api_key": {
            "type": [
              "string",
              "null"
            ],
            "description": "API key for authenticating with the provider.\nWill be encrypted at rest if encryption is configured."
          },
          "base_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Base URL for the provider's API.",
            "example": "https://api.openai.com/v1"
          },
          "name": {
            "type": [
              "string",
              "null"
            ],
            "description": "Display name for the provider.",
            "example": "OpenAI Development"
          },
          "provider_type": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmProviderType",
                "description": "The type of LLM provider (e.g., openai, anthropic)."
              }
            ]
          },
          "status": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/LlmProviderStatus",
                "description": "The status of the provider. Set to \"inactive\" to disable."
              }
            ]
          }
        }
      },
      "UpdateMcpServerRequest": {
        "type": "object",
        "description": "Request to update an MCP server. Only provided fields will be updated.",
        "properties": {
          "api_key": {
            "type": [
              "string",
              "null"
            ],
            "description": "API key for authentication. Set to update."
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "A human-readable description of what the MCP server provides.",
            "example": "Updated description"
          },
          "headers": {
            "type": [
              "object",
              "null"
            ],
            "description": "Additional HTTP headers for authentication.",
            "additionalProperties": {
              "type": "string"
            },
            "propertyNames": {
              "type": "string"
            }
          },
          "name": {
            "type": [
              "string",
              "null"
            ],
            "description": "The name of the MCP server.",
            "example": "updated-mcp-server"
          },
          "status": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/McpServerStatus",
                "description": "The status of the MCP server. Set to \"disabled\" to disable."
              }
            ]
          },
          "transport_type": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/McpServerTransportType",
                "description": "Transport type."
              }
            ]
          },
          "url": {
            "type": [
              "string",
              "null"
            ],
            "description": "The URL of the MCP server endpoint.",
            "example": "https://mcp.example.com/v1/mcp"
          }
        }
      },
      "UpdateScheduleRequest": {
        "type": "object",
        "description": "Update schedule request",
        "properties": {
          "catch_up_missed": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Catch up missed triggers"
          },
          "cron_expression": {
            "type": [
              "string",
              "null"
            ],
            "description": "New cron expression"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "New description"
          },
          "enabled": {
            "type": [
              "boolean",
              "null"
            ],
            "description": "Enable/disable"
          },
          "max_catch_up": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Max catch-up executions",
            "minimum": 0
          },
          "max_concurrent": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Max concurrent executions",
            "minimum": 0
          },
          "retry_policy": {
            "description": "Retry policy"
          },
          "target": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ScheduleTarget",
                "description": "New target"
              }
            ]
          },
          "timezone": {
            "type": [
              "string",
              "null"
            ],
            "description": "New timezone"
          }
        }
      },
      "UpdateSessionRequest": {
        "type": "object",
        "description": "Request to update a session. Only provided fields will be updated.",
        "properties": {
          "tags": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Tags for organizing and filtering sessions.",
            "example": [
              "resolved"
            ]
          },
          "title": {
            "type": [
              "string",
              "null"
            ],
            "description": "Human-readable title for the session.",
            "example": "Updated session title"
          }
        }
      },
      "User": {
        "type": "object",
        "description": "User response for listing",
        "required": [
          "id",
          "email",
          "name",
          "roles",
          "created_at"
        ],
        "properties": {
          "auth_provider": {
            "type": [
              "string",
              "null"
            ]
          },
          "avatar_url": {
            "type": [
              "string",
              "null"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "email": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "agents",
      "description": "Agent management endpoints"
    },
    {
      "name": "sessions",
      "description": "Session management endpoints"
    },
    {
      "name": "messages",
      "description": "Message management endpoints"
    },
    {
      "name": "events",
      "description": "Event streaming endpoints (SSE)"
    },
    {
      "name": "llm-providers",
      "description": "LLM Provider management endpoints"
    },
    {
      "name": "llm-models",
      "description": "LLM Model management endpoints"
    },
    {
      "name": "capabilities",
      "description": "Capability management endpoints"
    },
    {
      "name": "users",
      "description": "User management endpoints"
    },
    {
      "name": "filesystem",
      "description": "Session virtual filesystem endpoints"
    },
    {
      "name": "mcp-servers",
      "description": "MCP Server management endpoints"
    },
    {
      "name": "durable-schedules",
      "description": "Durable scheduled tasks management endpoints"
    }
  ]
}
